{
  "id": "00000000-0000-0000-0000-000000000000",
  "prevId": "",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.listings": {
      "name": "listings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "unit_id": {
          "name": "unit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "platform_room_id": {
          "name": "platform_room_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platform_listing_url": {
          "name": "platform_listing_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        }
      },
      "indexes": {
        "ix_listings_unit": {
          "name": "ix_listings_unit",
          "columns": [
            {
              "expression": "unit_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "listings_unit_idx": {
          "name": "listings_unit_idx",
          "columns": [
            {
              "expression": "unit_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "listings_unit_id_fkey": {
          "name": "listings_unit_id_fkey",
          "tableFrom": "listings",
          "tableTo": "units",
          "schemaTo": "public",
          "columnsFrom": [
            "unit_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.guests": {
      "name": "guests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "profile_city": {
          "name": "profile_city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reviews_count": {
          "name": "reviews_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "is_identity_verified": {
          "name": "is_identity_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        }
      },
      "indexes": {
        "guests_name_idx": {
          "name": "guests_name_idx",
          "columns": [
            {
              "expression": "full_name",
              "asc": true,
              "nulls": "last",
              "opclass": "gin_trgm_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "guests_full_name_check": {
          "name": "guests_full_name_check",
          "value": "length(TRIM(BOTH FROM full_name)) > 0"
        },
        "guests_reviews_count_check": {
          "name": "guests_reviews_count_check",
          "value": "reviews_count >= 0"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.reservation_line_items": {
      "name": "reservation_line_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "reservation_id": {
          "name": "reservation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "qty": {
          "name": "qty",
          "type": "numeric(12, 3)",
          "primaryKey": false,
          "notNull": true,
          "default": "'1'"
        },
        "unit_amount": {
          "name": "unit_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "total_amount": {
          "name": "total_amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        }
      },
      "indexes": {
        "line_items_category_idx": {
          "name": "line_items_category_idx",
          "columns": [
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "line_items_reservation_idx": {
          "name": "line_items_reservation_idx",
          "columns": [
            {
              "expression": "reservation_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "reservation_line_items_reservation_id_fkey": {
          "name": "reservation_line_items_reservation_id_fkey",
          "tableFrom": "reservation_line_items",
          "tableTo": "reservations",
          "schemaTo": "public",
          "columnsFrom": [
            "reservation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.messages": {
      "name": "messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "reservation_id": {
          "name": "reservation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "direction": {
          "name": "direction",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "author": {
          "name": "author",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "body": {
          "name": "body",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "posted_at": {
          "name": "posted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "source_url": {
          "name": "source_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        }
      },
      "indexes": {
        "messages_posted_idx": {
          "name": "messages_posted_idx",
          "columns": [
            {
              "expression": "posted_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "messages_reservation_idx": {
          "name": "messages_reservation_idx",
          "columns": [
            {
              "expression": "reservation_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "messages_reservation_id_fkey": {
          "name": "messages_reservation_id_fkey",
          "tableFrom": "messages",
          "tableTo": "reservations",
          "schemaTo": "public",
          "columnsFrom": [
            "reservation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "messages_author_check": {
          "name": "messages_author_check",
          "value": "length(TRIM(BOTH FROM author)) > 0"
        },
        "messages_body_check": {
          "name": "messages_body_check",
          "value": "length(TRIM(BOTH FROM body)) > 0"
        },
        "messages_direction_check": {
          "name": "messages_direction_check",
          "value": "direction = ANY (ARRAY['guest_to_host'::text, 'host_to_guest'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.emails_raw": {
      "name": "emails_raw",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "reservation_id": {
          "name": "reservation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "listing_id": {
          "name": "listing_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "from_address": {
          "name": "from_address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "to_address": {
          "name": "to_address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "raw_eml": {
          "name": "raw_eml",
          "type": "bytea",
          "primaryKey": false,
          "notNull": false
        },
        "parsed": {
          "name": "parsed",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "processed": {
          "name": "processed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        }
      },
      "indexes": {
        "emails_processed_idx": {
          "name": "emails_processed_idx",
          "columns": [
            {
              "expression": "processed",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "emails_sent_idx": {
          "name": "emails_sent_idx",
          "columns": [
            {
              "expression": "sent_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "emails_subject_idx": {
          "name": "emails_subject_idx",
          "columns": [
            {
              "expression": "subject",
              "asc": true,
              "nulls": "last",
              "opclass": "gin_trgm_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        }
      },
      "foreignKeys": {
        "emails_raw_listing_id_fkey": {
          "name": "emails_raw_listing_id_fkey",
          "tableFrom": "emails_raw",
          "tableTo": "listings",
          "schemaTo": "public",
          "columnsFrom": [
            "listing_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "emails_raw_reservation_id_fkey": {
          "name": "emails_raw_reservation_id_fkey",
          "tableFrom": "emails_raw",
          "tableTo": "reservations",
          "schemaTo": "public",
          "columnsFrom": [
            "reservation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "emails_raw_from_address_check": {
          "name": "emails_raw_from_address_check",
          "value": "from_address ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$'::text"
        },
        "emails_raw_subject_check": {
          "name": "emails_raw_subject_check",
          "value": "length(TRIM(BOTH FROM subject)) > 0"
        },
        "emails_raw_to_address_check": {
          "name": "emails_raw_to_address_check",
          "value": "to_address ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$'::text"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.chart_of_accounts": {
      "name": "chart_of_accounts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "parent_account_id": {
          "name": "parent_account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "chart_of_accounts_parent_account_id_fkey": {
          "name": "chart_of_accounts_parent_account_id_fkey",
          "tableFrom": "chart_of_accounts",
          "tableTo": "chart_of_accounts",
          "schemaTo": "public",
          "columnsFrom": [
            "parent_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "uq_name_parent": {
          "columns": [
            "parent_account_id",
            "name"
          ],
          "nullsNotDistinct": false,
          "name": "uq_name_parent"
        },
        "chart_of_accounts_code_key": {
          "columns": [
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "chart_of_accounts_code_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.vendors": {
      "name": "vendors",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'other'"
        },
        "contact_info": {
          "name": "contact_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        }
      },
      "indexes": {
        "vendors_name_idx": {
          "name": "vendors_name_idx",
          "columns": [
            {
              "expression": "name",
              "asc": true,
              "nulls": "last",
              "opclass": "gin_trgm_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "vendors_type_idx": {
          "name": "vendors_type_idx",
          "columns": [
            {
              "expression": "type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "vendors_name_check": {
          "name": "vendors_name_check",
          "value": "length(TRIM(BOTH FROM name)) > 0"
        },
        "vendors_type_check": {
          "name": "vendors_type_check",
          "value": "type = ANY (ARRAY['cleaner'::text, 'utilities'::text, 'supplies'::text, 'streaming'::text, 'repairs'::text, 'tax'::text, 'other'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.ai_documents": {
      "name": "ai_documents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "source_type": {
          "name": "source_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source_id": {
          "name": "source_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "source_updated_at": {
          "name": "source_updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "content_sha256": {
          "name": "content_sha256",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "embedding_model": {
          "name": "embedding_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "embedding_dim": {
          "name": "embedding_dim",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "file_type": {
          "name": "file_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "test_environment": {
          "name": "test_environment",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'production'"
        }
      },
      "indexes": {
        "ai_documents_meta_idx": {
          "name": "ai_documents_meta_idx",
          "columns": [
            {
              "expression": "metadata",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_path_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "ai_documents_source_idx": {
          "name": "ai_documents_source_idx",
          "columns": [
            {
              "expression": "source_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "source_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_documents_file_type": {
          "name": "idx_ai_documents_file_type",
          "columns": [
            {
              "expression": "file_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_documents_test_env": {
          "name": "idx_ai_documents_test_env",
          "columns": [
            {
              "expression": "test_environment",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_ai_documents_sha": {
          "name": "ix_ai_documents_sha",
          "columns": [
            {
              "expression": "content_sha256",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "ai_documents_file_type_check": {
          "name": "ai_documents_file_type_check",
          "value": "file_type = ANY (ARRAY['pdf'::text, 'xlsx'::text, 'docx'::text, 'csv'::text, 'jpg'::text, 'jpeg'::text, 'png'::text, 'txt'::text, 'other'::text])"
        },
        "ai_documents_source_type_check": {
          "name": "ai_documents_source_type_check",
          "value": "source_type = ANY (ARRAY['email'::text, 'reservation'::text, 'message'::text, 'payout'::text, 'expense'::text, 'statement'::text, 'receipt'::text, 'invoice'::text, 'memo'::text, 'contract'::text, 'report'::text, 'other'::text])"
        },
        "ai_documents_title_check": {
          "name": "ai_documents_title_check",
          "value": "length(TRIM(BOTH FROM title)) > 0"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.ai_chunks": {
      "name": "ai_chunks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "document_id": {
          "name": "document_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "chunk_index": {
          "name": "chunk_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "embedding": {
          "name": "embedding",
          "type": "vector(1536)",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        }
      },
      "indexes": {
        "ai_chunks_doc_idx": {
          "name": "ai_chunks_doc_idx",
          "columns": [
            {
              "expression": "document_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "chunk_index",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ai_chunks_embedding_idx": {
          "name": "ai_chunks_embedding_idx",
          "columns": [
            {
              "expression": "embedding",
              "asc": true,
              "nulls": "last",
              "opclass": "vector_cosine_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "ivfflat",
          "with": {
            "lists": "100"
          }
        },
        "idx_ai_chunks_metadata_chunk_type": {
          "name": "idx_ai_chunks_metadata_chunk_type",
          "columns": [
            {
              "expression": "((metadata ->> 'chunk_type'::text))",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": true
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_chunks_metadata_document_type": {
          "name": "idx_ai_chunks_metadata_document_type",
          "columns": [
            {
              "expression": "((metadata ->> 'document_type'::text))",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": true
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_chunks_metadata_gin": {
          "name": "idx_ai_chunks_metadata_gin",
          "columns": [
            {
              "expression": "metadata",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_ai_chunks_metadata_institution": {
          "name": "idx_ai_chunks_metadata_institution",
          "columns": [
            {
              "expression": "((metadata ->> 'institution'::text))",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": true
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_chunks_metadata_statement_id": {
          "name": "idx_ai_chunks_metadata_statement_id",
          "columns": [
            {
              "expression": "((metadata ->> 'statement_id'::text))",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": true
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "uq_ai_chunks_doc_idx": {
          "name": "uq_ai_chunks_doc_idx",
          "columns": [
            {
              "expression": "document_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "chunk_index",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ai_chunks_document_id_fkey": {
          "name": "ai_chunks_document_id_fkey",
          "tableFrom": "ai_chunks",
          "tableTo": "ai_documents",
          "schemaTo": "public",
          "columnsFrom": [
            "document_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "ai_chunks_document_id_chunk_index_key": {
          "columns": [
            "document_id",
            "chunk_index"
          ],
          "nullsNotDistinct": false,
          "name": "ai_chunks_document_id_chunk_index_key"
        }
      },
      "checkConstraints": {
        "ai_chunks_chunk_index_check": {
          "name": "ai_chunks_chunk_index_check",
          "value": "chunk_index >= 0"
        },
        "ai_chunks_content_check": {
          "name": "ai_chunks_content_check",
          "value": "length(TRIM(BOTH FROM content)) > 0"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.profiles": {
      "name": "profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "onboarding_completed": {
          "name": "onboarding_completed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "timezone('utc'::text, now())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "timezone('utc'::text, now())"
        }
      },
      "indexes": {
        "idx_profiles_email": {
          "name": "idx_profiles_email",
          "columns": [
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_profiles_phone": {
          "name": "idx_profiles_phone",
          "columns": [
            {
              "expression": "phone",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "profiles_id_fkey": {
          "name": "profiles_id_fkey",
          "tableFrom": "profiles",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can insert own profile": {
          "name": "Users can insert own profile",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ],
          "withCheck": "(auth.uid() = id)"
        },
        "Users can update own profile": {
          "name": "Users can update own profile",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Users can view own profile": {
          "name": "Users can view own profile",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.buying_parties": {
      "name": "buying_parties",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "party_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'forming'"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "calculator_state": {
          "name": "calculator_state",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "target_city": {
          "name": "target_city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "target_budget": {
          "name": "target_budget",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "timezone('utc'::text, now())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "timezone('utc'::text, now())"
        }
      },
      "indexes": {
        "idx_buying_parties_created_by": {
          "name": "idx_buying_parties_created_by",
          "columns": [
            {
              "expression": "created_by",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_buying_parties_status": {
          "name": "idx_buying_parties_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "buying_parties_created_by_fkey": {
          "name": "buying_parties_created_by_fkey",
          "tableFrom": "buying_parties",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Admins can delete parties": {
          "name": "Admins can delete parties",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ],
          "using": "(id IN ( SELECT party_members.party_id\n   FROM party_members\n  WHERE ((party_members.user_id = auth.uid()) AND (party_members.role = 'admin'::member_role))))"
        },
        "Admins can update their parties": {
          "name": "Admins can update their parties",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Members can view their parties": {
          "name": "Members can view their parties",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Users can create parties": {
          "name": "Users can create parties",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.party_members": {
      "name": "party_members",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "party_id": {
          "name": "party_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "member_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'member'"
        },
        "invite_status": {
          "name": "invite_status",
          "type": "invite_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'accepted'"
        },
        "ownership_percentage": {
          "name": "ownership_percentage",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "down_payment_contribution": {
          "name": "down_payment_contribution",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "monthly_contribution": {
          "name": "monthly_contribution",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "joined_at": {
          "name": "joined_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "timezone('utc'::text, now())"
        }
      },
      "indexes": {
        "idx_party_members_party_id": {
          "name": "idx_party_members_party_id",
          "columns": [
            {
              "expression": "party_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_party_members_user_id": {
          "name": "idx_party_members_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "party_members_party_id_fkey": {
          "name": "party_members_party_id_fkey",
          "tableFrom": "party_members",
          "tableTo": "buying_parties",
          "schemaTo": "public",
          "columnsFrom": [
            "party_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "party_members_user_id_fkey": {
          "name": "party_members_user_id_fkey",
          "tableFrom": "party_members",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "party_members_party_id_user_id_key": {
          "columns": [
            "party_id",
            "user_id"
          ],
          "nullsNotDistinct": false,
          "name": "party_members_party_id_user_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Admins can add members": {
          "name": "Admins can add members",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM party_members pm\n  WHERE ((pm.party_id = pm.party_id) AND (pm.user_id = auth.uid()) AND (pm.role = 'admin'::member_role))))"
        },
        "Admins can remove members": {
          "name": "Admins can remove members",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        },
        "Admins can update members": {
          "name": "Admins can update members",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Members can view own membership": {
          "name": "Members can view own membership",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Members can view party members": {
          "name": "Members can view party members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Users can add themselves via invite": {
          "name": "Users can add themselves via invite",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.properties": {
      "name": "properties",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "address_line1": {
          "name": "address_line1",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "address_line2": {
          "name": "address_line2",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "postal_code": {
          "name": "postal_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country": {
          "name": "country",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'US'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.payouts": {
      "name": "payouts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "reservation_id": {
          "name": "reservation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "expected_payout_date": {
          "name": "expected_payout_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "host_service_fee": {
          "name": "host_service_fee",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'USD'"
        },
        "paid_at": {
          "name": "paid_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "payout_ref": {
          "name": "payout_ref",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "payout_date": {
          "name": "payout_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "COALESCE(((paid_at AT TIME ZONE 'UTC'::text))::date, expected_payout_date)",
            "type": "stored"
          }
        },
        "payout_month": {
          "name": "payout_month",
          "type": "date",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "(date_trunc('month'::text, COALESCE((paid_at AT TIME ZONE 'UTC'::text), (expected_payout_date)::timestamp without time zone)))::date",
            "type": "stored"
          }
        },
        "payout_period_start": {
          "name": "payout_period_start",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "payout_period_end": {
          "name": "payout_period_end",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "ix_payouts_payout_date": {
          "name": "ix_payouts_payout_date",
          "columns": [
            {
              "expression": "payout_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_payouts_payout_month": {
          "name": "ix_payouts_payout_month",
          "columns": [
            {
              "expression": "payout_month",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_payouts_reservation": {
          "name": "ix_payouts_reservation",
          "columns": [
            {
              "expression": "reservation_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payouts_expected_date_idx": {
          "name": "payouts_expected_date_idx",
          "columns": [
            {
              "expression": "expected_payout_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "payouts_paid_idx": {
          "name": "payouts_paid_idx",
          "columns": [
            {
              "expression": "paid_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(paid_at IS NOT NULL)",
          "with": {}
        }
      },
      "foreignKeys": {
        "payouts_reservation_id_fkey": {
          "name": "payouts_reservation_id_fkey",
          "tableFrom": "payouts",
          "tableTo": "reservations",
          "schemaTo": "public",
          "columnsFrom": [
            "reservation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "payouts_amount_check": {
          "name": "payouts_amount_check",
          "value": "amount >= (0)::numeric"
        },
        "payouts_currency_check": {
          "name": "payouts_currency_check",
          "value": "currency = ANY (ARRAY['USD'::text, 'EUR'::text, 'CAD'::text, 'GBP'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.expense_categories": {
      "name": "expense_categories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subcategories": {
          "name": "subcategories",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "is_operating_expense": {
          "name": "is_operating_expense",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "parent_category": {
          "name": "parent_category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "expense_categories_name_key": {
          "columns": [
            "name"
          ],
          "nullsNotDistinct": false,
          "name": "expense_categories_name_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.units": {
      "name": "units",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "property_id": {
          "name": "property_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "unit_code": {
          "name": "unit_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "available_from": {
          "name": "available_from",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "available_until": {
          "name": "available_until",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "is_rental_unit": {
          "name": "is_rental_unit",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "aliases": {
          "name": "aliases",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "ix_units_property": {
          "name": "ix_units_property",
          "columns": [
            {
              "expression": "property_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "units_property_id_fkey": {
          "name": "units_property_id_fkey",
          "tableFrom": "units",
          "tableTo": "properties",
          "schemaTo": "public",
          "columnsFrom": [
            "property_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "units_property_id_unit_code_key": {
          "columns": [
            "property_id",
            "unit_code"
          ],
          "nullsNotDistinct": false,
          "name": "units_property_id_unit_code_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.reservations": {
      "name": "reservations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "listing_id": {
          "name": "listing_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "guest_id": {
          "name": "guest_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'airbnb'"
        },
        "confirmation_code": {
          "name": "confirmation_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "booking_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "checkin_date": {
          "name": "checkin_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "checkin_time": {
          "name": "checkin_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false,
          "default": "'15:00:00'"
        },
        "checkout_date": {
          "name": "checkout_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "checkout_time": {
          "name": "checkout_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false,
          "default": "'11:00:00'"
        },
        "nights": {
          "name": "nights",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "(checkout_date - checkin_date)",
            "type": "stored"
          }
        },
        "adults": {
          "name": "adults",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "children": {
          "name": "children",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "infants": {
          "name": "infants",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "pets": {
          "name": "pets",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "message_excerpt": {
          "name": "message_excerpt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "occupancy_taxes_collected": {
          "name": "occupancy_taxes_collected",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'USD'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "utc_now()"
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "embedding": {
          "name": "embedding",
          "type": "vector(768)",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "checkin_month": {
          "name": "checkin_month",
          "type": "date",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "(date_trunc('month'::text, (checkin_date)::timestamp without time zone))::date",
            "type": "stored"
          }
        },
        "checkout_month": {
          "name": "checkout_month",
          "type": "date",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "(date_trunc('month'::text, (checkout_date)::timestamp without time zone))::date",
            "type": "stored"
          }
        },
        "gross_amount": {
          "name": "gross_amount",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "host_fees": {
          "name": "host_fees",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "net_amount": {
          "name": "net_amount",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_reservations_checkin_date": {
          "name": "idx_reservations_checkin_date",
          "columns": [
            {
              "expression": "checkin_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reservations_checkout_date": {
          "name": "idx_reservations_checkout_date",
          "columns": [
            {
              "expression": "checkout_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reservations_confirmation_code": {
          "name": "idx_reservations_confirmation_code",
          "columns": [
            {
              "expression": "confirmation_code",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reservations_platform": {
          "name": "idx_reservations_platform",
          "columns": [
            {
              "expression": "platform",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_reservations_checkin_month": {
          "name": "ix_reservations_checkin_month",
          "columns": [
            {
              "expression": "checkin_month",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_reservations_listing": {
          "name": "ix_reservations_listing",
          "columns": [
            {
              "expression": "listing_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_reservations_status": {
          "name": "ix_reservations_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "reservations_dates_idx": {
          "name": "reservations_dates_idx",
          "columns": [
            {
              "expression": "checkin_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "checkout_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "reservations_embedding_idx": {
          "name": "reservations_embedding_idx",
          "columns": [
            {
              "expression": "embedding",
              "asc": true,
              "nulls": "last",
              "opclass": "vector_cosine_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "ivfflat",
          "with": {}
        },
        "reservations_listing_dates_idx": {
          "name": "reservations_listing_dates_idx",
          "columns": [
            {
              "expression": "listing_id",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "checkin_date",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "checkout_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "reservations_status_idx": {
          "name": "reservations_status_idx",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "reservations_guest_id_fkey": {
          "name": "reservations_guest_id_fkey",
          "tableFrom": "reservations",
          "tableTo": "guests",
          "schemaTo": "public",
          "columnsFrom": [
            "guest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "reservations_listing_id_fkey": {
          "name": "reservations_listing_id_fkey",
          "tableFrom": "reservations",
          "tableTo": "listings",
          "schemaTo": "public",
          "columnsFrom": [
            "listing_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "reservations_platform_confirmation_code_key": {
          "columns": [
            "platform",
            "confirmation_code"
          ],
          "nullsNotDistinct": false,
          "name": "reservations_platform_confirmation_code_key"
        }
      },
      "checkConstraints": {
        "nights_consistent": {
          "name": "nights_consistent",
          "value": "nights = (checkout_date - checkin_date)"
        },
        "reservations_check": {
          "name": "reservations_check",
          "value": "checkout_date > checkin_date"
        },
        "reservations_check1": {
          "name": "reservations_check1",
          "value": "(adults > 0) AND (children >= 0) AND (infants >= 0) AND (pets >= 0)"
        },
        "reservations_confirmation_code_check": {
          "name": "reservations_confirmation_code_check",
          "value": "length(TRIM(BOTH FROM confirmation_code)) > 0"
        },
        "reservations_currency_check": {
          "name": "reservations_currency_check",
          "value": "currency = ANY (ARRAY['USD'::text, 'EUR'::text, 'CAD'::text, 'GBP'::text])"
        },
        "reservations_occupancy_taxes_collected_check": {
          "name": "reservations_occupancy_taxes_collected_check",
          "value": "occupancy_taxes_collected >= (0)::numeric"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.party_invites": {
      "name": "party_invites",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "party_id": {
          "name": "party_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "invite_type": {
          "name": "invite_type",
          "type": "invite_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "invite_value": {
          "name": "invite_value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "invited_by": {
          "name": "invited_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "role": {
          "name": "role",
          "type": "member_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'member'"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "accepted_at": {
          "name": "accepted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "accepted_by": {
          "name": "accepted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "timezone('utc'::text, now())"
        }
      },
      "indexes": {
        "idx_party_invites_expires": {
          "name": "idx_party_invites_expires",
          "columns": [
            {
              "expression": "expires_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_party_invites_party_id": {
          "name": "idx_party_invites_party_id",
          "columns": [
            {
              "expression": "party_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_party_invites_value": {
          "name": "idx_party_invites_value",
          "columns": [
            {
              "expression": "invite_value",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "party_invites_accepted_by_fkey": {
          "name": "party_invites_accepted_by_fkey",
          "tableFrom": "party_invites",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "accepted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "party_invites_invited_by_fkey": {
          "name": "party_invites_invited_by_fkey",
          "tableFrom": "party_invites",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "invited_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "party_invites_party_id_fkey": {
          "name": "party_invites_party_id_fkey",
          "tableFrom": "party_invites",
          "tableTo": "buying_parties",
          "schemaTo": "public",
          "columnsFrom": [
            "party_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Admins can create invites": {
          "name": "Admins can create invites",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM party_members\n  WHERE ((party_members.party_id = party_invites.party_id) AND (party_members.user_id = auth.uid()) AND (party_members.role = 'admin'::member_role))))"
        },
        "Admins can delete invites": {
          "name": "Admins can delete invites",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        },
        "Anyone can view link invites by token": {
          "name": "Anyone can view link invites by token",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Members can view party invites": {
          "name": "Members can view party invites",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Users can accept invites": {
          "name": "Users can accept invites",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.financial_transactions": {
      "name": "financial_transactions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "source_document_id": {
          "name": "source_document_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tx_date": {
          "name": "tx_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "merchant": {
          "name": "merchant",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "transaction_type": {
          "name": "transaction_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cardholder": {
          "name": "cardholder",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "principal": {
          "name": "principal",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "interest": {
          "name": "interest",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "escrow": {
          "name": "escrow",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "fees": {
          "name": "fees",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "reservation_id": {
          "name": "reservation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "description_tsv": {
          "name": "description_tsv",
          "type": "tsvector",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "to_tsvector('english'::regconfig, ((description || ' '::text) || COALESCE(merchant, ''::text)))",
            "type": "stored"
          }
        },
        "test_environment": {
          "name": "test_environment",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'production'"
        }
      },
      "indexes": {
        "idx_fin_tx_date": {
          "name": "idx_fin_tx_date",
          "columns": [
            {
              "expression": "tx_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_fin_tx_date_type": {
          "name": "idx_fin_tx_date_type",
          "columns": [
            {
              "expression": "tx_date",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "transaction_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_fin_tx_fts": {
          "name": "idx_fin_tx_fts",
          "columns": [
            {
              "expression": "description_tsv",
              "asc": true,
              "nulls": "last",
              "opclass": "tsvector_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_fin_tx_merchant": {
          "name": "idx_fin_tx_merchant",
          "columns": [
            {
              "expression": "merchant",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_fin_tx_source": {
          "name": "idx_fin_tx_source",
          "columns": [
            {
              "expression": "source",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_financial_txns_test_env": {
          "name": "idx_financial_txns_test_env",
          "columns": [
            {
              "expression": "test_environment",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_transactions_amount": {
          "name": "idx_transactions_amount",
          "columns": [
            {
              "expression": "amount",
              "asc": true,
              "nulls": "last",
              "opclass": "numeric_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_transactions_date": {
          "name": "idx_transactions_date",
          "columns": [
            {
              "expression": "tx_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_transactions_statement_id": {
          "name": "idx_transactions_statement_id",
          "columns": [
            {
              "expression": "source_document_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_transactions_type": {
          "name": "idx_transactions_type",
          "columns": [
            {
              "expression": "transaction_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "financial_transactions_reservation_id_fkey": {
          "name": "financial_transactions_reservation_id_fkey",
          "tableFrom": "financial_transactions",
          "tableTo": "reservations",
          "schemaTo": "public",
          "columnsFrom": [
            "reservation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "transactions_statement_id_fkey": {
          "name": "transactions_statement_id_fkey",
          "tableFrom": "financial_transactions",
          "tableTo": "source_documents",
          "schemaTo": "public",
          "columnsFrom": [
            "source_document_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "transactions_transaction_type_check": {
          "name": "transactions_transaction_type_check",
          "value": "transaction_type = ANY (ARRAY['credit'::text, 'debit'::text, 'purchase'::text, 'payment'::text, 'mortgage_payment'::text, 'escrow_disbursement'::text, 'transfer'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.vendor_mappings": {
      "name": "vendor_mappings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "merchant_pattern": {
          "name": "merchant_pattern",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "chart_of_account_id": {
          "name": "chart_of_account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "split_across_units": {
          "name": "split_across_units",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "confidence": {
          "name": "confidence",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'1.0'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_vendor_mappings_merchant": {
          "name": "idx_vendor_mappings_merchant",
          "columns": [
            {
              "expression": "merchant_pattern",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "vendor_mappings_chart_of_account_id_fkey": {
          "name": "vendor_mappings_chart_of_account_id_fkey",
          "tableFrom": "vendor_mappings",
          "tableTo": "chart_of_accounts",
          "schemaTo": "public",
          "columnsFrom": [
            "chart_of_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "vendor_mappings_merchant_pattern_unique": {
          "columns": [
            "merchant_pattern"
          ],
          "nullsNotDistinct": false,
          "name": "vendor_mappings_merchant_pattern_unique"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.transaction_allocations": {
      "name": "transaction_allocations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "financial_transaction_id": {
          "name": "financial_transaction_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "chart_of_account_id": {
          "name": "chart_of_account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "property_id": {
          "name": "property_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "unit_id": {
          "name": "unit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "amount": {
          "name": "amount",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "needs_review": {
          "name": "needs_review",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "test_environment": {
          "name": "test_environment",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'production'"
        },
        "is_split": {
          "name": "is_split",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {
        "idx_allocations_needs_review": {
          "name": "idx_allocations_needs_review",
          "columns": [
            {
              "expression": "needs_review",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(needs_review = true)",
          "with": {}
        },
        "idx_allocations_test_env": {
          "name": "idx_allocations_test_env",
          "columns": [
            {
              "expression": "test_environment",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_allocations_tx_id": {
          "name": "idx_allocations_tx_id",
          "columns": [
            {
              "expression": "financial_transaction_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "transaction_allocations_financial_transaction_id_fkey": {
          "name": "transaction_allocations_financial_transaction_id_fkey",
          "tableFrom": "transaction_allocations",
          "tableTo": "financial_transactions",
          "schemaTo": "public",
          "columnsFrom": [
            "financial_transaction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "transaction_allocations_property_id_fkey": {
          "name": "transaction_allocations_property_id_fkey",
          "tableFrom": "transaction_allocations",
          "tableTo": "properties",
          "schemaTo": "public",
          "columnsFrom": [
            "property_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "transaction_allocations_unit_id_fkey": {
          "name": "transaction_allocations_unit_id_fkey",
          "tableFrom": "transaction_allocations",
          "tableTo": "units",
          "schemaTo": "public",
          "columnsFrom": [
            "unit_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_transaction_allocation": {
          "columns": [
            "financial_transaction_id",
            "chart_of_account_id"
          ],
          "nullsNotDistinct": false,
          "name": "unique_transaction_allocation"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Allow all inserts": {
          "name": "Allow all inserts",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ],
          "withCheck": "true"
        },
        "Allow service_role inserts": {
          "name": "Allow service_role inserts",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": false
    },
    "public.source_documents": {
      "name": "source_documents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "file_id": {
          "name": "file_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_name": {
          "name": "file_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_hash": {
          "name": "file_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "institution": {
          "name": "institution",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "account_number": {
          "name": "account_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "statement_date": {
          "name": "statement_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "document_type": {
          "name": "document_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "processed_date": {
          "name": "processed_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "confidence_score": {
          "name": "confidence_score",
          "type": "numeric(3, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "raw_data": {
          "name": "raw_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "beginning_balance": {
          "name": "beginning_balance",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "ending_balance": {
          "name": "ending_balance",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "reconciliation_status": {
          "name": "reconciliation_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "test_environment": {
          "name": "test_environment",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'production'"
        },
        "telegram_chat_id": {
          "name": "telegram_chat_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_source_docs_test_env": {
          "name": "idx_source_docs_test_env",
          "columns": [
            {
              "expression": "test_environment",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_statements_document_type": {
          "name": "idx_statements_document_type",
          "columns": [
            {
              "expression": "document_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_statements_file_hash": {
          "name": "idx_statements_file_hash",
          "columns": [
            {
              "expression": "file_hash",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_statements_institution": {
          "name": "idx_statements_institution",
          "columns": [
            {
              "expression": "institution",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_statements_statement_date": {
          "name": "idx_statements_statement_date",
          "columns": [
            {
              "expression": "statement_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "statements_file_hash_key": {
          "columns": [
            "file_hash"
          ],
          "nullsNotDistinct": false,
          "name": "statements_file_hash_key"
        }
      },
      "checkConstraints": {
        "statements_confidence_score_check": {
          "name": "statements_confidence_score_check",
          "value": "(confidence_score >= (0)::numeric) AND (confidence_score <= (1)::numeric)"
        },
        "statements_document_type_check": {
          "name": "statements_document_type_check",
          "value": "document_type = ANY (ARRAY['bank_statement'::text, 'credit_card'::text, 'mortgage'::text, 'utility'::text, 'unknown'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.owner_blocks": {
      "name": "owner_blocks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "unit_id": {
          "name": "unit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "default": "'owner_use'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_owner_blocks_dates": {
          "name": "idx_owner_blocks_dates",
          "columns": [
            {
              "expression": "start_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "end_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_owner_blocks_unit_dates": {
          "name": "idx_owner_blocks_unit_dates",
          "columns": [
            {
              "expression": "unit_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "start_date",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "end_date",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "owner_blocks_unit_id_fkey": {
          "name": "owner_blocks_unit_id_fkey",
          "tableFrom": "owner_blocks",
          "tableTo": "units",
          "schemaTo": "public",
          "columnsFrom": [
            "unit_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Allow anon read for owner blocks": {
          "name": "Allow anon read for owner blocks",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "anon"
          ],
          "using": "true"
        },
        "Authenticated users can read owner blocks": {
          "name": "Authenticated users can read owner blocks",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Service role can read all owner blocks": {
          "name": "Service role can read all owner blocks",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "service_role"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.audit_logs": {
      "name": "audit_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "table_name": {
          "name": "table_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "record_id": {
          "name": "record_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "old_data": {
          "name": "old_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "new_data": {
          "name": "new_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "changed_by": {
          "name": "changed_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'system'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.expense_review_queue": {
      "name": "expense_review_queue",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "financial_transaction_id": {
          "name": "financial_transaction_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "merchant": {
          "name": "merchant",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "amount": {
          "name": "amount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "tx_date": {
          "name": "tx_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "suggested_categories": {
          "name": "suggested_categories",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "telegram_message_id": {
          "name": "telegram_message_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "expense_review_queue_financial_transaction_id_fkey": {
          "name": "expense_review_queue_financial_transaction_id_fkey",
          "tableFrom": "expense_review_queue",
          "tableTo": "financial_transactions",
          "schemaTo": "public",
          "columnsFrom": [
            "financial_transaction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Allow authenticated read": {
          "name": "Allow authenticated read",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "true"
        }
      },
      "isRLSEnabled": true
    },
    "public.expense_review_state": {
      "name": "expense_review_state",
      "schema": "",
      "columns": {
        "telegram_user_id": {
          "name": "telegram_user_id",
          "type": "bigint",
          "primaryKey": true,
          "notNull": true
        },
        "current_review_id": {
          "name": "current_review_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "awaiting_category": {
          "name": "awaiting_category",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "last_message_id": {
          "name": "last_message_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "expense_review_state_current_review_id_fkey": {
          "name": "expense_review_state_current_review_id_fkey",
          "tableFrom": "expense_review_state",
          "tableTo": "expense_review_queue",
          "schemaTo": "public",
          "columnsFrom": [
            "current_review_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.manual_review_queue": {
      "name": "manual_review_queue",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "file_id": {
          "name": "file_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_name": {
          "name": "file_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "data": {
          "name": "data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "reviewer_notes": {
          "name": "reviewer_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_by": {
          "name": "reviewed_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_at": {
          "name": "reviewed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "merchant": {
          "name": "merchant",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "amount": {
          "name": "amount",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "tx_date": {
          "name": "tx_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "test_environment": {
          "name": "test_environment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_review_queue_created_at": {
          "name": "idx_review_queue_created_at",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_review_queue_status": {
          "name": "idx_review_queue_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "manual_review_queue_status_check": {
          "name": "manual_review_queue_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'in_review'::text, 'approved'::text, 'rejected'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.merchant_category_rules": {
      "name": "merchant_category_rules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "merchant_pattern": {
          "name": "merchant_pattern",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "correct_account_id": {
          "name": "correct_account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "correct_account_name": {
          "name": "correct_account_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rule_type": {
          "name": "rule_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'contains'"
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_merchant_rules_pattern": {
          "name": "idx_merchant_rules_pattern",
          "columns": [
            {
              "expression": "merchant_pattern",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "merchant_category_rules_correct_account_id_fkey": {
          "name": "merchant_category_rules_correct_account_id_fkey",
          "tableFrom": "merchant_category_rules",
          "tableTo": "chart_of_accounts",
          "schemaTo": "public",
          "columnsFrom": [
            "correct_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "merchant_category_rules_rule_type_check": {
          "name": "merchant_category_rules_rule_type_check",
          "value": "rule_type = ANY (ARRAY['exact'::text, 'contains'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.booking_status": {
      "name": "booking_status",
      "values": [
        "pending_request",
        "confirmed",
        "reminder",
        "canceled",
        "altered"
      ],
      "schema": "public"
    },
    "public.invite_status": {
      "name": "invite_status",
      "values": [
        "pending",
        "accepted",
        "declined"
      ],
      "schema": "public"
    },
    "public.invite_type": {
      "name": "invite_type",
      "values": [
        "email",
        "sms",
        "link"
      ],
      "schema": "public"
    },
    "public.member_role": {
      "name": "member_role",
      "values": [
        "admin",
        "member"
      ],
      "schema": "public"
    },
    "public.party_status": {
      "name": "party_status",
      "values": [
        "forming",
        "active",
        "under_contract",
        "closed",
        "archived"
      ],
      "schema": "public"
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.v_payouts": {
      "name": "v_payouts",
      "schema": "public",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "reservation_id": {
          "name": "reservation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "payout_date": {
          "name": "payout_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "amount": {
          "name": "amount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "host_service_fee": {
          "name": "host_service_fee",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payout_ref": {
          "name": "payout_ref",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT id, reservation_id, COALESCE(paid_at::date, expected_payout_date) AS payout_date, amount::numeric AS amount, host_service_fee::numeric AS host_service_fee, currency, payout_ref, created_at FROM payouts p",
      "materialized": false
    },
    "public.v_revenue_by_day": {
      "name": "v_revenue_by_day",
      "schema": "public",
      "columns": {
        "reservation_id": {
          "name": "reservation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "confirmation_code": {
          "name": "confirmation_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "revenue_date": {
          "name": "revenue_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "revenue_month": {
          "name": "revenue_month",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "property_id": {
          "name": "property_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "unit_id": {
          "name": "unit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "daily_revenue": {
          "name": "daily_revenue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "daily_net_revenue": {
          "name": "daily_net_revenue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "total_nights": {
          "name": "total_nights",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_revenue": {
          "name": "total_revenue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT r.id AS reservation_id, r.confirmation_code, d.day AS revenue_date, date_trunc('month'::text, d.day)::date AS revenue_month, u.property_id, l.unit_id, r.platform, CASE WHEN r.nights > 0 THEN COALESCE(ps.total_payout, 0::numeric) / r.nights::numeric ELSE 0::numeric END AS daily_revenue, CASE WHEN r.nights > 0 THEN COALESCE(ps.net_revenue, 0::numeric) / r.nights::numeric ELSE 0::numeric END AS daily_net_revenue, r.nights AS total_nights, COALESCE(ps.total_payout, 0::numeric) AS total_revenue FROM reservations r JOIN listings l ON r.listing_id = l.id JOIN units u ON l.unit_id = u.id LEFT JOIN ( SELECT v_payouts_canonical.reservation_id, sum(v_payouts_canonical.payout_amount) AS total_payout, sum(v_payouts_canonical.payout_amount - COALESCE(v_payouts_canonical.host_service_fee, 0::numeric)) AS net_revenue FROM v_payouts_canonical GROUP BY v_payouts_canonical.reservation_id) ps ON r.id = ps.reservation_id CROSS JOIN LATERAL generate_series(r.checkin_date::timestamp with time zone, (r.checkout_date - 1)::timestamp with time zone, '1 day'::interval) d(day) WHERE r.status = ANY (ARRAY['confirmed'::booking_status, 'altered'::booking_status])",
      "materialized": false
    },
    "public.v_reservations_canonical": {
      "name": "v_reservations_canonical",
      "schema": "public",
      "columns": {
        "reservation_id": {
          "name": "reservation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "listing_id": {
          "name": "listing_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "unit_id": {
          "name": "unit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "property_id": {
          "name": "property_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "booking_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "checkin_date": {
          "name": "checkin_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "checkout_date": {
          "name": "checkout_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "nights": {
          "name": "nights",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT r.id AS reservation_id, r.listing_id, l.unit_id, u.property_id, r.platform, r.status, r.checkin_date, r.checkout_date, r.nights, r.currency, r.created_at, r.updated_at FROM reservations r LEFT JOIN listings l ON l.id = r.listing_id LEFT JOIN units u ON u.id = l.unit_id",
      "materialized": false
    },
    "public.v_payouts_canonical": {
      "name": "v_payouts_canonical",
      "schema": "public",
      "columns": {
        "payout_id": {
          "name": "payout_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "reservation_id": {
          "name": "reservation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "payout_date": {
          "name": "payout_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "payout_month": {
          "name": "payout_month",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "payout_amount": {
          "name": "payout_amount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "host_service_fee": {
          "name": "host_service_fee",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "listing_id": {
          "name": "listing_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "unit_id": {
          "name": "unit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "property_id": {
          "name": "property_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT p.id AS payout_id, p.reservation_id, p.payout_date, p.payout_month, p.amount::numeric AS payout_amount, p.host_service_fee::numeric AS host_service_fee, p.currency, r.listing_id, l.unit_id, u.property_id FROM payouts p JOIN reservations r ON r.id = p.reservation_id LEFT JOIN listings l ON l.id = r.listing_id LEFT JOIN units u ON u.id = l.unit_id",
      "materialized": false
    },
    "public.v_revenue_by_month_payout": {
      "name": "v_revenue_by_month_payout",
      "schema": "public",
      "columns": {
        "month": {
          "name": "month",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "property_id": {
          "name": "property_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "amount": {
          "name": "amount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT payout_month AS month, property_id, sum(payout_amount) AS amount FROM v_payouts_canonical GROUP BY payout_month, property_id ORDER BY payout_month, property_id",
      "materialized": false
    },
    "public.v_revenue_by_month_staynights": {
      "name": "v_revenue_by_month_staynights",
      "schema": "public",
      "columns": {
        "month": {
          "name": "month",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "property_id": {
          "name": "property_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "amount": {
          "name": "amount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "WITH base AS ( SELECT r.reservation_id, r.property_id, r.checkin_date, r.checkout_date, r.nights, COALESCE(p.payout_amount, 0::numeric) AS total_payout FROM v_reservations_canonical r LEFT JOIN ( SELECT v_payouts_canonical.reservation_id, sum(v_payouts_canonical.payout_amount) AS payout_amount FROM v_payouts_canonical GROUP BY v_payouts_canonical.reservation_id) p ON p.reservation_id = r.reservation_id WHERE r.status = ANY (ARRAY['confirmed'::booking_status, 'altered'::booking_status]) ), expanded AS ( SELECT base.reservation_id, base.property_id, generate_series(base.checkin_date::timestamp without time zone, base.checkout_date - '1 day'::interval, '1 day'::interval)::date AS stay_date, CASE WHEN base.nights > 0 THEN base.total_payout / base.nights::numeric ELSE 0::numeric END AS cents_per_night FROM base ) SELECT date_trunc('month'::text, stay_date::timestamp with time zone)::date AS month, property_id, sum(cents_per_night) AS amount FROM expanded GROUP BY (date_trunc('month'::text, stay_date::timestamp with time zone)::date), property_id ORDER BY (date_trunc('month'::text, stay_date::timestamp with time zone)::date), property_id",
      "materialized": false
    },
    "public.mv_revenue_monthly": {
      "name": "mv_revenue_monthly",
      "schema": "public",
      "columns": {
        "month": {
          "name": "month",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "property_id": {
          "name": "property_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "amount": {
          "name": "amount",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT month, property_id, amount FROM v_revenue_by_month_payout",
      "materialized": true
    },
    "public.v_reservations_enriched": {
      "name": "v_reservations_enriched",
      "schema": "public",
      "columns": {
        "reservation_id": {
          "name": "reservation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "confirmation_code": {
          "name": "confirmation_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "booking_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "checkin_date": {
          "name": "checkin_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "checkout_date": {
          "name": "checkout_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "nights": {
          "name": "nights",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "checkin_month": {
          "name": "checkin_month",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "checkout_month": {
          "name": "checkout_month",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "adults": {
          "name": "adults",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "children": {
          "name": "children",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "infants": {
          "name": "infants",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "pets": {
          "name": "pets",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_guests": {
          "name": "total_guests",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "guest_id": {
          "name": "guest_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "guest_name": {
          "name": "guest_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "guest_city": {
          "name": "guest_city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "guest_verified": {
          "name": "guest_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "property_id": {
          "name": "property_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "property_name": {
          "name": "property_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line1": {
          "name": "address_line1",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "property_city": {
          "name": "property_city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "property_state": {
          "name": "property_state",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "unit_id": {
          "name": "unit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "unit_name": {
          "name": "unit_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "unit_code": {
          "name": "unit_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "listing_id": {
          "name": "listing_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "listing_title": {
          "name": "listing_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform_room_id": {
          "name": "platform_room_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_revenue": {
          "name": "total_revenue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "host_fees": {
          "name": "host_fees",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "net_revenue": {
          "name": "net_revenue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "adr": {
          "name": "adr",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "searchable_content": {
          "name": "searchable_content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT r.id AS reservation_id, r.confirmation_code, r.platform, r.status, r.checkin_date, r.checkout_date, r.nights, r.checkin_month, r.checkout_month, r.adults, r.children, r.infants, r.pets, r.adults + r.children AS total_guests, g.id AS guest_id, g.full_name AS guest_name, g.profile_city AS guest_city, g.is_identity_verified AS guest_verified, p.id AS property_id, p.name AS property_name, p.address_line1, p.city AS property_city, p.state AS property_state, u.id AS unit_id, u.display_name AS unit_name, u.unit_code, l.id AS listing_id, l.title AS listing_title, l.platform_room_id, COALESCE(payout_summary.total_payout, 0::numeric) AS total_revenue, COALESCE(payout_summary.total_fees, 0::numeric) AS host_fees, COALESCE(payout_summary.net_revenue, 0::numeric) AS net_revenue, CASE WHEN r.nights > 0 THEN round(COALESCE(payout_summary.total_payout, 0::numeric) / r.nights::numeric, 2) ELSE 0::numeric END AS adr, format('Reservation %s at %s (%s, %s). Unit: %s. Guest: %s from %s. Platform: %s. Dates: %s to %s (%s nights, %s guests). Revenue: $%s (Net: $%s after $%s fees). Status: %s. ADR: $%s'::text, r.confirmation_code, COALESCE(p.name, 'Unknown Property'::text), COALESCE(p.city, 'Unknown City'::text), COALESCE(p.state, 'Unknown State'::text), COALESCE(u.display_name, u.unit_code, 'N/A'::text), COALESCE(g.full_name, 'Unknown Guest'::text), COALESCE(g.profile_city, 'Unknown'::text), r.platform, r.checkin_date::text, r.checkout_date::text, r.nights, r.adults + r.children, COALESCE(payout_summary.total_payout, 0::numeric), COALESCE(payout_summary.net_revenue, 0::numeric), COALESCE(payout_summary.total_fees, 0::numeric), r.status::text, CASE WHEN r.nights > 0 THEN round(COALESCE(payout_summary.total_payout, 0::numeric) / r.nights::numeric, 2) ELSE 0::numeric END) AS searchable_content, r.created_at, r.updated_at FROM reservations r LEFT JOIN guests g ON r.guest_id = g.id LEFT JOIN listings l ON r.listing_id = l.id LEFT JOIN units u ON l.unit_id = u.id LEFT JOIN properties p ON u.property_id = p.id LEFT JOIN ( SELECT v_payouts_canonical.reservation_id, sum(v_payouts_canonical.payout_amount) AS total_payout, sum(v_payouts_canonical.host_service_fee) AS total_fees, sum(v_payouts_canonical.payout_amount - COALESCE(v_payouts_canonical.host_service_fee, 0::numeric)) AS net_revenue FROM v_payouts_canonical GROUP BY v_payouts_canonical.reservation_id) payout_summary ON r.id = payout_summary.reservation_id",
      "materialized": false
    },
    "public.v_occupancy_by_month": {
      "name": "v_occupancy_by_month",
      "schema": "public",
      "columns": {
        "month": {
          "name": "month",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "property_id": {
          "name": "property_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "unit_id": {
          "name": "unit_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "unit_name": {
          "name": "unit_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "available_nights": {
          "name": "available_nights",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "booked_nights": {
          "name": "booked_nights",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "occupancy_rate": {
          "name": "occupancy_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "WITH calendar AS ( SELECT generate_series(date_trunc('month'::text, min(reservations.checkin_date)::timestamp with time zone), date_trunc('month'::text, max(reservations.checkout_date)::timestamp with time zone), '1 mon'::interval)::date AS month FROM reservations ), unit_months AS ( SELECT u.id AS unit_id, u.property_id, u.display_name AS unit_name, c.month, date_part('days'::text, c.month + '1 mon'::interval - c.month::timestamp without time zone) AS days_in_month FROM units u CROSS JOIN calendar c WHERE u.is_active = true ), booked_nights AS ( SELECT l.unit_id, date_trunc('month'::text, d.day)::date AS month, count(*) AS nights_booked FROM reservations r JOIN listings l ON r.listing_id = l.id CROSS JOIN LATERAL generate_series(r.checkin_date::timestamp with time zone, (r.checkout_date - 1)::timestamp with time zone, '1 day'::interval) d(day) WHERE r.status = ANY (ARRAY['confirmed'::booking_status, 'altered'::booking_status]) GROUP BY l.unit_id, (date_trunc('month'::text, d.day)) ) SELECT um.month, um.property_id, um.unit_id, um.unit_name, um.days_in_month AS available_nights, COALESCE(bn.nights_booked, 0::bigint) AS booked_nights, round(COALESCE(bn.nights_booked, 0::bigint)::numeric / um.days_in_month::numeric * 100::numeric, 2) AS occupancy_rate FROM unit_months um LEFT JOIN booked_nights bn ON um.unit_id = bn.unit_id AND um.month = bn.month ORDER BY um.month DESC, um.property_id, um.unit_id",
      "materialized": false
    },
    "public.v_metrics_by_month": {
      "name": "v_metrics_by_month",
      "schema": "public",
      "columns": {
        "month": {
          "name": "month",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "property_id": {
          "name": "property_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "total_revenue": {
          "name": "total_revenue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "net_revenue": {
          "name": "net_revenue",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "occupied_nights": {
          "name": "occupied_nights",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "booking_count": {
          "name": "booking_count",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "adr": {
          "name": "adr",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "avg_booking_value": {
          "name": "avg_booking_value",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "revpar_estimate": {
          "name": "revpar_estimate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT revenue_month AS month, property_id, sum(daily_revenue) AS total_revenue, sum(daily_net_revenue) AS net_revenue, count(*) AS occupied_nights, count(DISTINCT reservation_id) AS booking_count, round(sum(daily_revenue) / NULLIF(count(*), 0)::numeric, 2) AS adr, round(sum(daily_revenue) / NULLIF(count(DISTINCT reservation_id), 0)::numeric, 2) AS avg_booking_value, round(((sum(daily_revenue) / NULLIF(count(*), 0)::numeric)::double precision * (count(*)::numeric::double precision / date_part('days'::text, revenue_month + '1 mon'::interval - revenue_month::timestamp without time zone)))::numeric, 2) AS revpar_estimate FROM v_revenue_by_day GROUP BY revenue_month, property_id ORDER BY revenue_month DESC, property_id",
      "materialized": false
    }
  },
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {
      "expense_categories": {
        "columns": {
          "subcategories": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "units": {
        "columns": {
          "aliases": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      }
    }
  }
}